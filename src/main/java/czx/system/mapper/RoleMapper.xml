<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"   
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">  

<mapper namespace="czx.system.dao.RoleDao">
	
	<resultMap id="resultOfInteger" type="java.lang.Integer">
		<result column="total" property="total" jdbcType="INTEGER" />
	</resultMap>
	
	
	<resultMap type="czx.system.bean.Role" id="role">
		<result property="roleId" column="roleid" javaType="int" jdbcType="INTEGER"/>
		<result property="roleName" column="rolename" javaType="string" jdbcType="VARCHAR"/>
		<result property="roleType" column="roleType" javaType="int" jdbcType="INTEGER"/>
		<result property="roleLevel" column="roleLevel" javaType="int" jdbcType="INTEGER"/>
		<result property="roleOperateLevel" column="roleOperateLevel" javaType="int" jdbcType="INTEGER"/>
	</resultMap>

	<select id="queryRoleCount" resultMap="resultOfInteger">
		select count(1) total from sys_role
	</select>
	
	<select id="queryRoleList" resultMap="role">
		select roleid,rolename,roleType,roleLevel,roleOperateLevel from sys_role
		<if test="param1!=-1">
			limit ${param1},${param2}
		</if>
	</select>
	
	<select id="isexist" resultMap="role">
		select roleid from sys_role where roleid = #{roleId}
	</select>
	
	<insert id="addRole">
		insert into sys_role(roleid,rolename,roleType,roleLevel,roleOperateLevel)
		values (#{roleId},#{roleName},#{roleType},#{roleLevel},#{roleOperateLevel})
	</insert>
	
	<update id="updateRole">
		update sys_role
		set roleName = #{roleName},
			roleType = #{roleType},
			roleLevel = #{roleLevel},
			roleOperateLevel = #{roleOperateLevel}
		where roleid = #{roleId}
	</update>
	
	<delete id="deleteRole">
		delete from sys_role
		where roleid in 
		<foreach collection="list" item="item" open="(" separator="," close=")">
			#{item.roleId}
		</foreach>
	</delete>
	 
</mapper>
